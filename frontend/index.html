<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SwipeClean - Home</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/home.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Splash Screen -->
  <div id="splash-screen" class="splash-screen">
    <div class="logo">📱</div>
    <h1>SwipeClean</h1>
    <p>Swipe away your storage clutter</p>
  </div>

  <!-- Home Screen -->
  <div id="home-screen" class="home-container" style="display: none;">
    <div class="top-bar">
      <div class="top-bar-left">
        <div class="top-bar-logo">📱</div>
      </div>
      <div class="top-bar-right">
        <span id="storage-info">Loading storage...</span>
      </div>
    </div>
    <div class="main-content">
      <button class="action-button" onclick="window.location.href='/swipe'">Start Cleaning</button>
      <button class="action-button blue" onclick="window.location.href='/suggestions'">Smart Scan</button>
      <button class="action-button gray" onclick="window.location.href='/browser'">Browse Files</button>
      <button class="action-button gray" onclick="window.location.href='/settings'">Settings</button>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item active">
        <div class="nav-icon">🏠</div>
        Home
      </div>
      <div class="nav-item" onclick="window.location.href='/swipe'">
        <div class="nav-icon">🖼️</div>
        Gallery
      </div>
      <div class="nav-item" onclick="window.location.href='/suggestions'">
        <div class="nav-icon">💡</div>
        Suggestions
      </div>
      <div class="nav-item" onclick="window.location.href='/browser'">
        <div class="nav-icon">📁</div>
        Files
      </div>
      <div class="nav-item" onclick="window.location.href='/settings'">
        <div class="nav-icon">⚙️</div>
        Settings
      </div>
    </nav>
  </div>

  <script>
    const isFirstTimeUser = !localStorage.getItem('hasOnboarded');
    
    function initApp() {
      if (isFirstTimeUser) {
        setTimeout(() => {
          localStorage.setItem('hasOnboarded', 'true');
          window.location.href = '/permissions';
        }, 2000);
      } else {
        setTimeout(() => {
          document.getElementById('splash-screen').style.display = 'none';
          document.getElementById('home-screen').style.display = 'block';
          document.querySelector('.home-container').classList.add('active');
          loadStorageInfo();
        }, 2000);
      }
    }

    async function loadStorageInfo() {
      try {
        const response = await fetch('/api/storage/info');
        const data = await response.json();
        document.getElementById('storage-info').textContent = `${data.used} GB of ${data.total} GB used`;
      } catch (error) {
        document.getElementById('storage-info').textContent = 'Storage info unavailable';
      }
    }

    initApp();
  </script>
</body>
</html>